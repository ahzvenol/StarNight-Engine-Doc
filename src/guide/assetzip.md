星夜引擎提供了一些构建工具来帮助你优化访问速度,你可以在[这里]()下载到接下来会提到的所有构建工具<br/>
~~在使用这些工具之前,你需要先[#配置python环境]()~~<br/>
这些工具现在不需要任何环境配置了,只需要下载即可使用<br/>
## 通过资源预处理提高访问速度
在上面提到的下载链接中,你可以看到与这里的小标题一一对应的构建工具,只需要将它们放置在index.html的同级目录下,点击即可使用<br/>
如果你想进行快速的优化,将构建工具全部下载后运行`一键处理.exe`即可<br/>
这些工具会生成一个`dist`文件夹,你需要将这个文件夹中的文件放置到你的网站目录中<br/>
你应该在发布你的游戏之前运行构建工具,并在发布新版本时重新构建<br/>
接下来介绍这些工具的作用,如果不感兴趣,可以直接跳转到[下个内容](#通过优化网络服务提高访问速度)
### 压缩剧本
可读的用户脚本需要经过处理后才能被程序识别,压缩剧本工具通过提前将剧本转换为`json`格式来提高运行时性能,并通过去除不必要的字符压缩剧本大小
### 压缩资源
#### 压缩图片资源
压缩图片工具通过将多张图片的相同部分进行提取,显著压缩图片资源总体大小的同时并不影响图片质量
#### 压缩音频资源
压缩音频工具确实对音频资源进行了压缩,因此它不会被`一键处理.exe`默认选中,如果在你的游戏中音频资源有很大的大小并已经造成访问时的卡顿(这在网络带宽较小时会比较明显),你可能需要使用这个工具
## 通过优化网络服务提高访问速度
### 使用gzip传输模式
摘自网络的介绍<br/>
`Gzip是一种流行的文件压缩算法，现在的应用十分广泛，尤其是在Linux平台。当应用Gzip压缩到一个纯文本文件时，效果是非常明显的，大约可以减少70％以上的文件大小。这取决于文件中的内容。`<br/>
在阅读这个部分前,你应当确认你正在使用Linux服务器并具备基本的操作能力,如果在阅读过程中有困惑,最好去搜索一下<br/>
首先[下载]()星夜引擎配套后端软件,并上传到你的服务器,软件的同级目录就是你的**网站目录**,将你的游戏文件(不是文件夹)放在这个目录中<br/>
运行以下命令,其中`80`是服务器对外提供服务的端口号,`WebService.log`是运行日志的名称
```
nohup ./WebService.exe --port 80 > WebService.log 2>&1 &
```
通过cat命令查看日志
```
cat WebService.log
```
如果显示`WebService Started At XXXX`并且没有其他内容,gzip压缩启用成功<br/>
如果你对浏览器有一定了解,可以查看控制台Network选项卡的Content-Encoding条目观察效果<br/>
$未来或许会将预处理功能集成到后端软件中以提高发布效率
### 使用CDN加速
摘自网络的介绍<br/>
`CDN一般指内容分发网络。 CDN的全称是Content Delivery Network，即内容分发网络。其基本思路是尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输得更快、更稳定`<br/>
这部分教程并不对代理方式的CDN加速做说明,你可以在各大服务器运营商的网站上看到相关的服务并轻松的使用它<br/>
如果你将资源托管在了第三方网站上,并且获得了资源的访问链接,你需要这篇教程<br/>
在阅读这个部分前,你最好对json格式有基本的了解,并具备一定的编程知识<br/>
比如你现在有这样两个链接
```
http://imgsrc.baidu.com/super/pic/item/96dda144ad3459822c2b5b4849f431adcaef8443.jpg
http://imgsrc.baidu.com/super/pic/item/8601a18b87d6277fd8b58ce26d381f30e824fc41.jpg
```
分别对应于你游戏中的`01.png`和`02.jpg`,你需要在`userData`文件夹下新建`CDN1.txt`,并输入以下内容
```ts
{
    "http://imgsrc.baidu.com/super/pic/item/96dda144ad3459822c2b5b4849f431adcaef8443.jpg":"01.png",
    "http://imgsrc.baidu.com/super/pic/item/8601a18b87d6277fd8b58ce26d381f30e824fc41.jpg":"02.png"
}
```
这样,引擎在加载资源时就会优先去你所填入的链接位置加载,如果加载失败,则会回到你自己的服务器进行加载<br/>
上面的格式就是**json**格式,它的语法有几个要点需要注意(如果已经了解可以跳过)<br/>
需要一对大括号`{}`在开头和结尾,不要忘记写双引号`""`以及引号`:`,大部分行的结尾应该有逗号`,`,除了最后一行<br/>
因为游戏资源应该很多,手动上传和复制粘贴链接来编写脚本并不轻松,建议进行编程来批量上传和自动生成json文件<br/>
如果你还有第二个链接对应相同资源,可以再新建`CDN2.txt`重复上述操作,引擎的请求顺序如下所示
```haskell
CDN1 => CDN2 =>CDN3 ... =>本地服务器
```
